(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),o=s(2),i=s.n(o);const h=e=>{if(e.ok)return e;throw new Error("Request was either a 404 or 500")},c=e=>e.json();var r=class extends n.a.Component{constructor(e){super(e),this.state={new_task:"",tasks:[]},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.fetchTasks=this.fetchTasks.bind(this),this.deleteTask=this.deleteTask.bind(this),this.toggleComplete=this.toggleComplete.bind(this)}componentDidMount(){this.fetchTasks()}shouldComponentUpdate(e,t){return t.tasks!==this.state.tasks||t.new_task!==this.state.new_task}fetchTasks(){fetch("https://fewd-todolist-api.onrender.com/tasks?api_key=48").then(h).then(c).then(e=>{this.setState({tasks:e.tasks})}).catch(e=>{console.error(e.message)})}handleChange(e){this.setState({new_task:e.target.value})}handleSubmit(e){e.preventDefault();let{new_task:t}=this.state;(t=t.trim())&&fetch("https://fewd-todolist-api.onrender.com/tasks?api_key=48",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:{content:t}})}).then(h).then(c).then(e=>{this.setState(t=>({tasks:[...t.tasks,e.task],new_task:""}))}).catch(e=>{console.error(e)})}deleteTask(e){e&&fetch(`https://fewd-todolist-api.onrender.com/tasks/${e}?api_key=48`,{method:"DELETE",mode:"cors"}).then(h).then(()=>{this.fetchTasks()}).catch(e=>{console.error(e)})}toggleComplete(e,t){const s=!t;fetch(`https://fewd-todolist-api.onrender.com/tasks/${e}?api_key=48`,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:{completed:s}})}).then(h).then(()=>{this.setState(t=>({tasks:t.tasks.map(t=>t.id===e?{...t,completed:s}:t)}))}).catch(e=>{console.error(e)})}render(){const{new_task:e,tasks:t}=this.state;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h2",{className:"mb-3"},"To Do List"),t.length>0?t.map(e=>n.a.createElement("div",{key:e.id,className:"row mb-1"},n.a.createElement("p",{className:"col"},e.content),n.a.createElement("button",{onClick:()=>this.deleteTask(e.id)},"Delete"),n.a.createElement("input",{type:"checkbox",onChange:()=>this.toggleComplete(e.id,e.completed),checked:e.completed}))):n.a.createElement("p",null,"No tasks here"),n.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-inline my-4"},n.a.createElement("input",{type:"text",className:"form-control mr-sm-2 mb-2",placeholder:"New task",value:e,onChange:this.handleChange}),n.a.createElement("button",{type:"submit",className:"btn btn-primary mb-2"},"Submit")))))}};const l=document.getElementById("root");i.a.createRoot(l).render(n.a.createElement(r,null))},3:function(e,t,s){e.exports=s(12)}},[[3,1,2]]]);
//# sourceMappingURL=main.85a466d0.chunk.js.map